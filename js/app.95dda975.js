(function(t){function e(e){for(var a,r,l=e[0],s=e[1],c=e[2],p=0,u=[];p<l.length;p++)r=l[p],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&u.push(i[r][0]),i[r]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a]);d&&d(e);while(u.length)u.shift()();return n.push.apply(n,c||[]),o()}function o(){for(var t,e=0;e<n.length;e++){for(var o=n[e],a=!0,l=1;l<o.length;l++){var s=o[l];0!==i[s]&&(a=!1)}a&&(n.splice(e--,1),t=r(r.s=o[0]))}return t}var a={},i={app:0},n=[];function r(e){if(a[e])return a[e].exports;var o=a[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=a,r.d=function(t,e,o){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(o,a,function(e){return t[e]}.bind(null,a));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/geojson-editor/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var d=s;n.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"0c0d":function(t,e,o){t.exports=o.p+"img/B1-B4_groundfloor.0d7bb9b3.jpg"},"23ca":function(t,e,o){t.exports=o.p+"img/B7.2d8b7e30.jpg"},"2f87":function(t,e,o){t.exports=o.p+"img/A3.441a4a5f.jpg"},"4c08":function(t,e,o){},"53cd":function(t,e,o){t.exports=o.p+"img/A1.eee12c2c.jpg"},"56d7":function(t,e,o){"use strict";o.r(e);o("e260"),o("e6cf"),o("cca6"),o("a79d");var a=o("2b0e"),i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("div",{staticClass:"toolbar toolbar-top-left"},[o("div",{staticClass:"group"},[o("label",[t._v("modify")]),o("div",{staticClass:"button move",class:{active:"move"===t.toolmode},attrs:{"data-tippy-content":"Move"},on:{click:function(e){return t.toolButton({toolmode:"move",leafletselector:".leaflet-pm-icon-drag"})}}},[o("svg",{attrs:{width:"24",height:"24",viewBox:"0 0 30 30"}},[o("path",{attrs:{id:"move-a",d:"M21,14 L21,10 L27,15 L21,20 L21,16 L16,16 L16,21 L20,21 L15,27 L10,21 L14,21 L14,16 L9,16 L9,20 L3,15 L9,10 L9,14 L14,14 L14,9 L10,9 L15,3 L20,9 L16,9 L16,14 L21,14 Z"}})])]),o("div",{staticClass:"button edit",class:{active:"edit"===t.toolmode},attrs:{"data-tippy-content":"Edit"},on:{click:function(e){return t.toolButton({toolmode:"edit",leafletselector:".leaflet-pm-icon-edit"})}}},[o("svg",{attrs:{width:"24",height:"24",viewBox:"0 0 30 30"}},[o("path",{attrs:{id:"edit_anchor-a",d:"M13.5,11 C11.5670034,11 10,9.43299662 10,7.5 C10,5.56700338 11.5670034,4 13.5,4 C15.4329966,4 17,5.56700338 17,7.5 C17,9.43299662 15.4329966,11 13.5,11 Z M13.5,9 C14.3284271,9 15,8.32842712 15,7.5 C15,6.67157288 14.3284271,6 13.5,6 C12.6715729,6 12,6.67157288 12,7.5 C12,8.32842712 12.6715729,9 13.5,9 Z M12.0002889,7.52973893 C12.0125983,8.16273672 12.4170197,8.6996643 12.9807111,8.90767966 L3,15 L3,13 L12.0002889,7.52973893 Z M14.2172722,6.18228472 L19.453125,3 L22.6589355,3 L14.989102,7.68173885 C14.9962971,7.62216459 15,7.56151472 15,7.5 C15,6.93138381 14.6836098,6.4366645 14.2172722,6.18228472 Z M23.4434042,19.2851736 L20.1282799,19.2851736 L21.8729983,23.5349525 C21.9945296,23.8295773 21.8556546,24.1599209 21.5778734,24.2849208 L20.0414675,24.9545142 C19.7550613,25.0795141 19.4338738,24.9366704 19.3123426,24.6509518 L17.6544367,20.6154541 L14.9461873,23.4010151 C14.5852811,23.7721711 14,23.4860463 14,22.9992653 L14,9.57183533 C14,9.05933561 14.6225311,8.809492 14.946156,9.17008555 L23.8340292,18.3120179 C24.1925291,18.6613615 23.9279979,19.2851736 23.4434042,19.2851736 Z"}})])]),o("div",{staticClass:"button cut",class:{active:"cut"===t.toolmode},attrs:{"data-tippy-content":"Cut"},on:{click:function(e){return t.toolButton({toolmode:"cut",leafletselector:".leaflet-pm-icon-cut"})}}},[o("svg",{attrs:{width:"24px",height:"24px",viewBox:"0 0 30 30"}},[o("path",{attrs:{d:"M12.9691574,13.4939435 L21.0317032,5.54167013 L23.4649499,5.67722957 L17.0470713,14.5106816 L27.5660336,17.1333535 L25.7891944,18.8012588 L14.5854951,17.8987506 L13.6487955,19.188007 C13.794639,19.2650958 13.9367985,19.3534417 14.0741377,19.4532245 C15.6379648,20.5894114 15.9846357,22.7782052 14.8484488,24.3420324 C13.7122619,25.9058595 11.5234681,26.2525304 9.95964096,25.1163435 C8.39581384,23.9801565 8.04914296,21.7913627 9.18532986,20.2275356 C9.74587276,19.4560145 10.5626188,18.9807475 11.4341218,18.8336407 L12.6805656,17.1180579 L12.5239724,16.3747216 L11.9506932,15.3012391 L9.89310646,14.7882251 C9.13093796,15.2357261 8.19977854,15.3966447 7.27445355,15.1659352 C5.39887519,14.698301 4.25751094,12.7987519 4.72514515,10.9231736 C5.19277935,9.04759519 7.09232846,7.90623094 8.96790682,8.37386515 C10.8434852,8.84149935 11.9848494,10.7410485 11.5172152,12.6166268 C11.4761464,12.7813449 11.4240335,12.9404001 11.3618627,13.0931999 L12.9691574,13.4939435 Z M7.75829735,13.2253438 C8.56211664,13.4257584 9.37620912,12.9366023 9.57662378,12.132783 C9.77703844,11.3289637 9.28788233,10.5148713 8.48406303,10.3144566 C7.68024373,10.1140419 6.86615126,10.603198 6.6657366,11.4070173 C6.46532194,12.2108366 6.95447805,13.0249291 7.75829735,13.2253438 Z M10.8033639,21.4031061 C10.3164266,22.0733177 10.4649998,23.0113722 11.1352115,23.4983095 C11.8054231,23.9852467 12.7434776,23.8366735 13.2304148,23.1664619 C13.7173521,22.4962502 13.5687788,21.5581957 12.8985672,21.0712585 C12.2283556,20.5843212 11.2903011,20.7328945 10.8033639,21.4031061 Z",id:"path-1"}})])]),o("div",{staticClass:"button delete",class:{active:"delete"===t.toolmode},attrs:{"data-tippy-content":"Delete"},on:{click:function(e){return t.toolButton({toolmode:"delete",leafletselector:".leaflet-pm-icon-delete"})}}},[o("svg",{attrs:{width:"24px",height:"24px",viewBox:"0 0 30 30"}},[o("path",{attrs:{d:"M17.7874219,18.4812552 L11.6480079,13.3498184 L6.40466009,19.3816001 L10.5539156,22.9884929 L13.86934,22.9884929 L17.7874219,18.4812552 Z M16.5074252,22.9884929 L26.0000002,22.9884929 L26.0000002,24.9884929 L10.0000002,24.9884929 L9.80708313,24.9884929 L5.09254204,20.8910192 C4.25891285,20.1663564 4.17057814,18.9031112 4.89524093,18.069482 L16.0482444,5.23941916 C16.7729072,4.40578998 18.0361525,4.31745526 18.8697816,5.04211806 L24.9074583,10.2905903 C25.7410875,11.0152531 25.8294222,12.2784983 25.1047594,13.1121275 L16.5074252,22.9884929 Z",id:"path-1"}})])])]),o("div",{staticClass:"group"},[o("label",[t._v("create")]),o("div",{staticClass:"button marker",class:{active:"marker"===t.toolmode},attrs:{"data-tippy-content":"Marker"},on:{click:function(e){return t.toolButton({toolmode:"marker",leafletselector:".leaflet-pm-icon-circle-marker"})}}},[t._v(" Marker ")]),o("div",{staticClass:"button booth",class:{active:"booth"===t.toolmode},attrs:{"data-tippy-content":"Booth"},on:{click:function(e){return t.toolButton({toolmode:"booth",leafletselector:".leaflet-pm-icon-polygon"})}}},[t._v(" Booth ")]),o("div",{staticClass:"button hall",class:{active:"hall"===t.toolmode},attrs:{"data-tippy-content":"Hall"},on:{click:function(e){return t.toolButton({toolmode:"hall",leafletselector:".leaflet-pm-icon-polygon"})}}},[t._v(" Hall ")]),o("div",{staticClass:"button background",class:{active:"background"===t.toolmode},attrs:{"data-tippy-content":"Background"},on:{click:function(e){return t.toolButton({toolmode:"background",leafletselector:".leaflet-pm-icon-polygon"})}}},[t._v(" BG ")])]),o("div",{staticClass:"group"},[o("label",[t._v("Actions")]),o("div",{staticClass:"button order",attrs:{"data-tippy-content":"order the elements to fit their type"},on:{click:t.orderButton}},[t._v(" Order ")]),o("div",{staticClass:"button import",attrs:{"data-tippy-content":"upload a geojson file"},on:{click:t.openImport}},[t._v(" Import ")]),o("div",{staticClass:"button export",class:{success:!0===t.saveSuccessful,error:!1===t.saveSuccessful},attrs:{id:"export","data-tippy-content":"download as a geojson file"},on:{click:t.exportFeatures}},[t._v(" Save ")])])]),o("div",{staticClass:"toolbar toolbar-top-right"},[o("div",{staticClass:"group"},[o("label",[t._v("layers")]),o("div",{staticClass:"button",on:{click:function(e){return t.toggleLayer("marker")}}},[o("i",{staticClass:"material-icons toggle-indicator",class:{hidden:t.visibleLayer.marker}},[t._v("visibility"+t._s(t.visibleLayer.marker?"":"_off"))]),t._v(" Markers ")]),o("div",{staticClass:"button",on:{click:function(e){return t.toggleLayer("booth")}}},[o("i",{staticClass:"material-icons toggle-indicator",class:{hidden:t.visibleLayer.booth}},[t._v("visibility"+t._s(t.visibleLayer.booth?"":"_off"))]),t._v(" Booths ")]),o("div",{staticClass:"button",on:{click:function(e){return t.toggleLayer("hall")}}},[o("i",{staticClass:"material-icons toggle-indicator",class:{hidden:t.visibleLayer.hall}},[t._v("visibility"+t._s(t.visibleLayer.hall?"":"_off"))]),t._v(" Halls ")]),o("div",{staticClass:"button",on:{click:function(e){return t.toggleLayer("background")}}},[o("i",{staticClass:"material-icons toggle-indicator",class:{hidden:t.visibleLayer.background}},[t._v("visibility"+t._s(t.visibleLayer.background?"":"_off"))]),t._v(" BG ")])]),o("div",{staticClass:"group"},[o("label",[t._v("views")]),t._l(t.imageLayers,(function(e){return o("div",{key:e.id,staticClass:"button",on:{click:function(e){return t.console.log("etwas")}}},[t._v(" "+t._s(e.name)+" ")])})),o("div",{staticClass:"button",on:{click:function(e){return t.console.log("etwas")}}},[t._v(" + ")])],2),o("div",{staticClass:"group"},[o("label",[t._v("navigation")]),o("div",{staticClass:"button",on:{click:function(e){return t.centerMap(53.560528,9.9762644)}}},[t._v(" Messe-Halle ")])])]),o("div",{staticClass:"anchor bottom right"},[o("FormMapView",{attrs:{cadImageNames:t.cadImageNames,topLeftLat:t.imageLayers[0].coords.topLeft[0],topLeftLng:t.imageLayers[0].coords.topLeft[1],topRightLat:t.imageLayers[0].coords.topRight[0],topRightLng:t.imageLayers[0].coords.topRight[1],bottomLeftLat:t.imageLayers[0].coords.bottomLeft[0],bottomLeftLng:t.imageLayers[0].coords.bottomLeft[1]},on:{coordinatesUpdated:t.coordinatesUpdated,cadImageSelected:t.cadImageSelected}})],1),o("div",{staticClass:"popup",class:{active:t.polygonSelected},attrs:{stylex:{left:t.selectedPolygonPoint.x+"px",top:t.selectedPolygonPoint.y+"px"}}},[o("button",{on:{click:function(e){return t.toggleEdit(t.editPolygonModal.id)}}},[t._v("edit")]),o("div",{staticClass:"field-wrapper"},[o("label",{attrs:{for:"id"}},[t._v("Id:")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.editPolygonModal.id,expression:"editPolygonModal.id"}],attrs:{type:"text",id:"id"},domProps:{value:t.editPolygonModal.id},on:{input:function(e){e.target.composing||t.$set(t.editPolygonModal,"id",e.target.value)}}})]),"marker"!==t.editPolygonModal.type?o("div",{staticClass:"field-wrapper"},[o("label",{attrs:{for:"type"}},[t._v("Type:")]),o("select",{directives:[{name:"model",rawName:"v-model",value:t.editPolygonModal.type,expression:"editPolygonModal.type"}],attrs:{name:"type",id:"type"},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.editPolygonModal,"type",e.target.multiple?o:o[0])}}},[o("option",{attrs:{value:"background"}},[t._v("Background")]),o("option",{attrs:{value:"hall"}},[t._v("Hall")]),o("option",{attrs:{value:"booth"}},[t._v("Booth")])])]):t._e(),"marker"!==t.editPolygonModal.type?o("div",{staticClass:"field-wrapper"},[o("label",{attrs:{for:"color"}},[t._v("Color:")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.editPolygonModal.color,expression:"editPolygonModal.color"}],attrs:{type:"color",id:"color-picker"},domProps:{value:t.editPolygonModal.color},on:{input:function(e){e.target.composing||t.$set(t.editPolygonModal,"color",e.target.value)}}}),o("input",{directives:[{name:"model",rawName:"v-model",value:t.editPolygonModal.color,expression:"editPolygonModal.color"}],attrs:{type:"text",id:"color"},domProps:{value:t.editPolygonModal.color},on:{input:function(e){e.target.composing||t.$set(t.editPolygonModal,"color",e.target.value)}}})]):t._e(),"booth"===t.editPolygonModal.type?o("div",{staticClass:"field-wrapper"},[o("label",[t._v("use MyOMR Company Name:")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.editPolygonModal.myomrCompanyName,expression:"editPolygonModal.myomrCompanyName"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.editPolygonModal.myomrCompanyName)?t._i(t.editPolygonModal.myomrCompanyName,null)>-1:t.editPolygonModal.myomrCompanyName},on:{change:function(e){var o=t.editPolygonModal.myomrCompanyName,a=e.target,i=!!a.checked;if(Array.isArray(o)){var n=null,r=t._i(o,n);a.checked?r<0&&t.$set(t.editPolygonModal,"myomrCompanyName",o.concat([n])):r>-1&&t.$set(t.editPolygonModal,"myomrCompanyName",o.slice(0,r).concat(o.slice(r+1)))}else t.$set(t.editPolygonModal,"myomrCompanyName",i)}}})]):t._e(),"booth"===t.editPolygonModal.type?o("div",{staticClass:"field-wrapper"},[o("label",[t._v("Custom Label:")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.editPolygonModal.customLabel,expression:"editPolygonModal.customLabel"}],attrs:{type:"text"},domProps:{value:t.editPolygonModal.customLabel},on:{input:function(e){e.target.composing||t.$set(t.editPolygonModal,"customLabel",e.target.value)}}})]):t._e(),"marker"===t.editPolygonModal.type?o("div",{staticClass:"field-wrapper"},[o("label",{attrs:{for:"text"}},[t._v("Text:")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.editPolygonModal.text,expression:"editPolygonModal.text"}],attrs:{type:"text",id:"text"},domProps:{value:t.editPolygonModal.text},on:{input:function(e){e.target.composing||t.$set(t.editPolygonModal,"text",e.target.value)}}})]):t._e(),"marker"===t.editPolygonModal.type?o("div",{staticClass:"field-wrapper"},[o("label",{attrs:{for:"image"}},[t._v("Image:")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.editPolygonModal.image,expression:"editPolygonModal.image"}],attrs:{type:"text",id:"image"},domProps:{value:t.editPolygonModal.image},on:{input:function(e){e.target.composing||t.$set(t.editPolygonModal,"image",e.target.value)}}})]):t._e(),o("div",{staticClass:"actions"},[o("div",{staticClass:"update btn",on:{click:t.updateProperties}},[t._v("save data")]),o("div",{staticClass:"cancel btn",on:{click:function(e){t.polygonSelected=!1}}},[t._v("cancel")])])]),o("div",{staticClass:"import-modal",class:{active:t.importOpen}},[o("p",{staticStyle:{"text-align":"center"}},[t._v(" start by uploading your existing geojson file ")]),o("input",{staticClass:"inputfile",attrs:{type:"file",id:"selectFiles",value:"Import"},on:{change:function(e){return t.importGeojson(e)}}}),o("label",{attrs:{for:"selectFiles"}},[t._v("upload JSON")]),o("br"),o("div",{staticClass:"close-btn",on:{click:function(e){t.importOpen=!1}}},[o("i",{staticClass:"material-icons"},[t._v("close")])])]),o("div",{attrs:{id:"map"}})])},n=[],r=(o("99af"),o("4de4"),o("7db0"),o("4160"),o("caad"),o("d81d"),o("b0c0"),o("d3b7"),o("159b"),o("96cf"),o("1da1")),l=o("39c3"),s=(o("c963"),o("d952")),c=(o("52df"),o("21a6")),d=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"formMapView"},[o("div",{staticClass:"viewName"},[o("label",{attrs:{for:"viewName__input"}},[t._v("View name")]),o("input",{attrs:{id:"viewName__input",value:"Default"}}),t.editedMapView?t._e():o("svg",{staticClass:"close-btn",attrs:{width:"7",height:"7"}},[o("path",{attrs:{fill:"#fff",d:"M-1-1h9v9h-9z"}}),o("g",[o("path",{attrs:{"stroke-linecap":"undefined","stroke-linejoin":"undefined","stroke-width":"1.5",stroke:"#000",fill:"none",d:"M.75.75l5 5M.75 5.75l5-5"}})])])]),o("div",{staticClass:"formMapView__header"},[t._v(" Overlay image ")]),o("div",{staticClass:"formMapView__sectionDynamic"},[t.editedMapView?o("div",{staticClass:"newView"},[t._m(0)]):t._e(),t.editedMapView?t._e():o("div",{staticClass:"editView"},[o("select",{staticClass:"selected-image-name",attrs:{name:"cadImages",id:"cadImageSelect"},on:{change:t.cadImageSelected}},t._l(t.cadImageNames,(function(e){return o("option",{key:e},[t._v(" "+t._s(e)+" ")])})),0),o("div",{staticClass:"selected-image-coordinates"},[o("div"),t._m(1),t._m(2),o("svg",{attrs:{height:"24",width:"24"}},[o("circle",{attrs:{cx:"12",cy:"12",r:"10",stroke:"#3388FF","stroke-width":"3",fill:"transparent"}})]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.localTopLeftLat,expression:"localTopLeftLat"}],domProps:{value:t.localTopLeftLat},on:{blur:function(e){return t.coordinatesUpdated()},input:function(e){e.target.composing||(t.localTopLeftLat=e.target.value)}}}),o("input",{directives:[{name:"model",rawName:"v-model",value:t.localTopLeftLng,expression:"localTopLeftLng"}],domProps:{value:t.localTopLeftLng},on:{blur:function(e){return t.coordinatesUpdated()},input:function(e){e.target.composing||(t.localTopLeftLng=e.target.value)}}}),o("svg",{attrs:{height:"24",width:"24"}},[o("circle",{attrs:{cx:"12",cy:"12",r:"10",stroke:"#FFE74C","stroke-width":"3",fill:"transparent"}})]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.localTopRightLat,expression:"localTopRightLat"}],domProps:{value:t.localTopRightLat},on:{blur:function(e){return t.coordinatesUpdated()},input:function(e){e.target.composing||(t.localTopRightLat=e.target.value)}}}),o("input",{directives:[{name:"model",rawName:"v-model",value:t.localTopRightLng,expression:"localTopRightLng"}],domProps:{value:t.localTopRightLng},on:{blur:function(e){return t.coordinatesUpdated()},input:function(e){e.target.composing||(t.localTopRightLng=e.target.value)}}}),o("svg",{attrs:{height:"24",width:"24"}},[o("circle",{attrs:{cx:"12",cy:"12",r:"10",stroke:"#FF5964","stroke-width":"3",fill:"transparent"}})]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.localBottomLeftLat,expression:"localBottomLeftLat"}],domProps:{value:t.localBottomLeftLat},on:{blur:function(e){return t.coordinatesUpdated()},input:function(e){e.target.composing||(t.localBottomLeftLat=e.target.value)}}}),o("input",{directives:[{name:"model",rawName:"v-model",value:t.localBottomLeftLng,expression:"localBottomLeftLng"}],domProps:{value:t.localBottomLeftLng},on:{blur:function(e){return t.coordinatesUpdated()},input:function(e){e.target.composing||(t.localBottomLeftLng=e.target.value)}}})]),o("div",{staticClass:"actions"})])])])},p=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"imageUploader"},[o("div",{staticClass:"text"},[t._v("Drag image here to upload")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("label",[t._v("lat")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("label",[t._v("lng")])])}],u=(o("a9e3"),{name:"FormMapView",props:{cadImageNames:Array,topLeftLat:Number,topLeftLng:Number,topRightLat:Number,topRightLng:Number,bottomLeftLat:Number,bottomLeftLng:Number},created:function(){this.localTopLeftLat=this.topLeftLat,this.localTopLeftLng=this.topLeftLng,this.localTopRightLat=this.topRightLat,this.localTopRightLng=this.topRightLng,this.localBottomLeftLat=this.bottomLeftLat,this.localBottomLeftLng=this.bottomLeftLng},data:function(){return{editedMapView:void 0,localTopLeftLat:53.5606529,localTopLeftLng:9.9761438,localTopRightLat:53.5606529,localTopRightLng:9.9783825,localBottomLeftLat:53.5586262,localBottomLeftLng:9.9761438}},methods:{coordinatesUpdated:function(){this.$emit("coordinatesUpdated",{topLeft:[+this.localTopLeftLat,+this.localTopLeftLng],topRight:[+this.localTopRightLat,+this.localTopRightLng],bottomLeft:[+this.localBottomLeftLat,+this.localBottomLeftLng]})},cadImageSelected:function(t){this.$emit("cadImageSelected",t.target.value)}},watch:{topLeftLat:function(t){this.localTopLeftLat=t},topLeftLng:function(t){this.localTopLeftLng=t},topRightLat:function(t){this.localTopRightLat=t},topRightLng:function(t){this.localTopRightLng=t},bottomLeftLat:function(t){this.localBottomLeftLat=t},bottomLeftLng:function(t){this.localBottomLeftLng=t}}}),m=u,g=(o("93fd"),o("2877")),f=Object(g["a"])(m,d,p,!1,null,"03795dae",null),v=f.exports,h=(o("0ebd"),o("53cd")),y=o.n(h),L=o("2f87"),b=o.n(L),C=o("813e"),w=o.n(C),P=o("d7ee"),M=o.n(P),_=o("0c0d"),k=o.n(_),x=(o("b341"),o("e5c6"),o("23ca"),"https://pyrite-phrygian-barge.glitch.me/");function B(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(){return{width:0,height:0,top:e,right:t,bottom:e,left:t}}}var O={name:"App",components:{FormMapView:v},data:function(){return{serveGeojson:1,geojsonUrl:"".concat(x,"geojson"),editPolygonModal:{id:null,type:null,hall:null,color:null,text:null,image:null,myomrCompanyName:null,customLabel:null},importOpen:!1,selectedPolygon:null,polygonSelected:!1,selectedPolygonPoint:{x:300,y:300},toolmode:"",visibleLayer:{marker:!0,booth:!0,hall:!0,background:!0},originalJson:[],markerColors:{topLeft:"#3388FF",topRight:"#FFE74C",bottomLeft:"#FF5964"},saveSuccessful:null,cadImages:[{name:"OMR22 A1",image:y.a},{name:"OMR22 A3",image:b.a},{name:"OMR22 A4",image:w.a},{name:"OMR22 B1-B4 groundfloor",image:k.a},{name:"OMR22 B1-B4 1st floor",image:M.a},{name:"OMR22 B5",image:cadB5},{name:"OMR22 B6",image:cadB6},{name:"OMR22 B7",image:cadB7}],imageLayers:[{id:"9b1deb4d-3b7d-4bad-9bdd-2b0d7b3dcb6d",imageFile:w.a,name:"Default",visible:!0,coords:{topLeft:[53.5606529,9.9761438],topRight:[53.5606529,9.9783825],bottomLeft:[53.5586262,9.9761438]}}]}},computed:{cadImageNames:function(){return this.cadImages.map((function(t){return t.name}))}},created:function(){this.map=null,this.virtualElement={getBoundingClientRect:B()}},mounted:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var o,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=document.querySelector(".popup"),t.instance=Object(l["a"])(t.virtualElement,o,{modifiers:[{name:"offset",options:{offset:[0,18]}}]}),Object(s["a"])(document.querySelectorAll(".toolbar .button[data-tippy-content]"),{placement:"right"}),a=function(){t.map.createPane("cadOverlayPane"),t.imageLayers.forEach((function(e){t.initCadImageHandles(e.id,e.coords,"topLeft",t.markerColors.topLeft),t.initCadImageHandles(e.id,e.coords,"topRight",t.markerColors.topRight),t.initCadImageHandles(e.id,e.coords,"bottomLeft",t.markerColors.bottomLeft),t.updateCadImage(e)}))},i=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.map=new window.L.map("map").setView([53.560074,9.978011],15),window.L.tileLayer("https://api.mapbox.com/styles/v1/mapbox/dark-v10/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFya3VzLW9tciIsImEiOiJjanRmaml1OTUwYXVzNGFtaHNmMGdiOTR3In0.kT-uNoSoWBmKrCJkjlAbjg",{maxZoom:22,attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://mapbox.com">Mapbox</a>'}).addTo(t.map),t.renderImportedGeoJson(),a(),t.map.pm.addControls({position:"bottomleft",drawCircle:!1,drawMarker:!0,drawRectangle:!1}),t.map.pm.setPathOptions({color:"#D83364",fillColor:"#D83364",fillOpacity:.4}),t.map.pm.findLayers().forEach((function(e){e.on("pm:drag",(function(e){"cadHandle"===e.target.feature.properties.type?t.saveimageCoords(e):t.openPopup(e)}))})),t.map.on("pm:create",(function(e){e.layer.on("click",(function(e){console.log("clicked a created polygon",e.target.feature.properties.id),console.log("dragging",t.dragging),t.openPopup(e)})),e.layer.feature={},e.layer.feature.type="Feature",e.layer.feature.properties={id:""},e.layer.feature.properties.type=t.toolmode,["polygon","background","hall","booth"].includes(t.toolmode)&&(t.toolmode="")})),t.map.on("pm:dragstart",(function(){console.log("dragging started"),t.dragging=!0})),t.map.on("pm:dragend",(function(){console.log("dragging ended"),t.dragging=!1}));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=7,t.loadCurrentState();case 7:setTimeout(i,100);case 8:case"end":return e.stop()}}),e)})))()},methods:{loadCurrentState:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.serveGeojson){e.next=4;break}return e.abrupt("return",fetch(t.geojsonUrl).then((function(t){if(t.ok)return t.json();throw console.log("could not load geojson",t),new Error("Could not load GEOJSON")})).then((function(e){console.log(e),t.originalJson=t.originalJson.concat([e])})));case 4:return t.importOpen=!0,e.abrupt("return");case 6:case"end":return e.stop()}}),e)})))()},importGeojson:function(){var t=this,e=document.getElementById("selectFiles").files;if(e.length<=0)return!1;var o=new FileReader;o.onload=function(e){var o=JSON.parse(e.target.result);t.originalJson=t.originalJson.concat([o]),t.importOpen=!1,t.renderImportedGeoJson()},o.readAsText(e.item(0))},renderImportedGeoJson:function(){var t=this;this.originalJson.forEach((function(e){window.L.geoJSON(e,{style:{weight:0,fillOpacity:1}}).addTo(t.map)})),this.orderButton(),this.map.pm.findLayers().forEach((function(e){e.on("drag",(function(e){console.log("dragging marker",e.target),t.openPopup(e)})),e.on("click",(function(e){console.log("clicked a existing/imported polygon",e.target.feature.properties.id),t.openPopup(e)}))}))},saveimageCoords:function(t){console.log("updating cadImage",t);var e=t.target,o=this.imageLayers.find((function(t){return t.id===e.feature.properties.viewId}));o.coords[e.feature.properties.position]=[e._latlng.lat,e._latlng.lng],this.updateCadImage(o)},updateProperties:function(){this.selectedPolygon.target.feature.properties.id=this.editPolygonModal.id,this.selectedPolygon.target.feature.properties.hall=this.editPolygonModal.hall,this.selectedPolygon.target.feature.properties.type=this.editPolygonModal.type,this.selectedPolygon.target.feature.properties.color=this.editPolygonModal.color,this.selectedPolygon.target.feature.properties.text=this.editPolygonModal.text,this.selectedPolygon.target.feature.properties.image=this.editPolygonModal.image,this.selectedPolygon.target.feature.properties.myomrCompanyName=this.editPolygonModal.myomrCompanyName,this.selectedPolygon.target.feature.properties.customLabel=this.editPolygonModal.customLabel,this.polygonSelected=!1},openPopup:function(t){var e=this;if(""===this.toolmode){console.log("opening popup",t),this.polygonSelected=!0;var o={x:t.containerPoint.x,y:t.containerPoint.y};this.selectedPolygonPoint.x=o.x,this.selectedPolygonPoint.y=o.y,this.virtualElement.getBoundingClientRect=B(o.x,o.y),this.instance.update(),this.selectedPolygon=t;var a=function(t){t.forEach((function(t){e.editPolygonModal[t]=""}))},i=function(t,o){t.forEach((function(t){o[t]&&(e.editPolygonModal[t]=o[t])}))};a(["id","color","hall","type","text","image"]),i(["id","color","hall","type","text","image"],t.target.feature.properties)}},openImport:function(){this.importOpen=!0,this.originalJson=[]},exportFeatures:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var o,a,i,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=t.map.pm.findLayers().filter((function(t){return!t.properties||"cadHandle"!==t.properties.type})),a=o.map((function(t){return console.log(t.toGeoJSON()),t.toGeoJSON()})),i={type:"featuresCollections",features:a},!t.serveGeojson){e.next=11;break}return e.next=6,fetch(t.geojsonUrl,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(i)}).then((function(t){return t.json()}));case 6:n=e.sent,n.success?t.saveSuccessful=!0:t.saveSuccessful=!1,setTimeout((function(){t.saveSuccessful=null}),3e3),e.next=13;break;case 11:r=new Blob([JSON.stringify(i)],{type:"text/plain;charset=utf-8"}),Object(c["saveAs"])(r,"features.json");case 13:case"end":return e.stop()}}),e)})))()},updateCadImage:function(t){var e=this;this.map.eachLayer((function(o){o.feature&&o.feature.properties.id===t.id&&e.map.removeLayer(o)}));var o=window.L.imageOverlay.rotated(t.imageFile,t.coords.topLeft,t.coords.topRight,t.coords.bottomLeft,{className:"cad-image",pane:"cadOverlayPane"}).addTo(this.map);o.feature={properties:{id:t.id}}},initCadImageHandles:function(t,e,o,a){var i=window.L.circleMarker(e[o],{radius:10,color:a}).addTo(this.map);i.feature={properties:{type:"cadHandle",color:a,position:o,viewId:t}}},updateCadImageHandles:function(t,e,o){var a=this;console.log("updating",t,e,o);var i=this.map.pm.findLayers().find((function(e){return"cadHandle"===e.feature.properties.type&&e.feature.properties.viewId===t&&e.feature.properties.position===o}));console.log("iterating over marker",i),console.log("removing marker",i,i.feature.properties),this.map.removeLayer(i);var n=this.markerColors[o];console.log("removed marker color was",n,"coords were",e);var r=window.L.circleMarker(e,{radius:10,color:n}).addTo(this.map);r.feature={properties:{type:"cadHandle",color:n,position:o,viewId:t}},r.on("pm:drag",(function(t){return a.saveimageCoords(t)}))},toolButton:function(t){var e=this,o=t.toolmode,a=t.leafletselector;document.querySelector(a).click(),setTimeout((function(){var t=document.querySelector(a).parentElement.parentElement.classList.contains("active");e.toolmode=t?o:""}),200)},toggleLayer:function(t){var e=this;this.map.pm.findLayers().forEach((function(o){o.feature.properties.type===t&&(e.visibleLayer[t]?o.getElement().style.display="none":o.getElement().style.display="block")})),this.visibleLayer[t]=!this.visibleLayer[t]},orderButton:function(){var t=this;console.log("ordering the layers");var e=["marker","booth","hall","background"];e.forEach((function(e){t.map.pm.findLayers().forEach((function(t){console.log("ordering layer:",t),t.feature.properties.type===e&&"marker"!==t.feature.properties.type&&(t.bringToBack(),t.feature.properties.fillOpacity=1,void 0===t.feature.properties.color||""===t.feature.properties.color?t.setStyle({fillColor:"blue"}):t.setStyle({fillColor:t.feature.properties.color}))}))}))},centerMap:function(t,e){this.map.panTo({lat:t,lng:e})},coordinatesUpdated:function(t){var e=this.imageLayers[0];e.coords=Object.assign({},t),this.updateCadImageHandles(e.id,e.coords.topLeft,"topLeft"),this.updateCadImageHandles(e.id,e.coords.topRight,"topRight"),this.updateCadImageHandles(e.id,e.coords.bottomLeft,"bottomLeft"),this.updateCadImage(e)},cadImageSelected:function(t){var e=this.imageLayers[0],o=this.cadImages.find((function(e){return e.name===t})).image;e.imageFile=o,this.updateCadImage(e)},toggleEdit:function(t){var e=this;this.map.pm.findLayers().forEach((function(o){o.feature.properties.id&&o.feature.properties.id===t&&(o.pm.toggleEdit({allowSelfIntersection:!1}),e.polygonSelected=!1)}))}}},R=O,N=(o("8840"),Object(g["a"])(R,i,n,!1,null,null,null)),T=N.exports;a["a"].config.productionTip=!1,new a["a"]({render:function(t){return t(T)}}).$mount("#app")},"813e":function(t,e,o){t.exports=o.p+"img/A4.65da159e.jpg"},8840:function(t,e,o){"use strict";var a=o("4c08"),i=o.n(a);i.a},"93fd":function(t,e,o){"use strict";var a=o("bd88"),i=o.n(a);i.a},b341:function(t,e,o){t.exports=o.p+"img/B5.3d722c4d.jpg"},bd88:function(t,e,o){},c963:function(t,e){Array.prototype.last||(Array.prototype.last=function(){return this[this.length-1]})},d7ee:function(t,e,o){t.exports=o.p+"img/B1-B4_1floor.c6951cfa.jpg"},e5c6:function(t,e,o){t.exports=o.p+"img/B6.bed0208c.jpg"}});
//# sourceMappingURL=app.95dda975.js.map